<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>لوحة المشرف</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background: #e0f7fa;
            font-family: 'Tahoma', sans-serif;
        }
        h1 {
            color: #00796b;
            text-align: center;
            margin-bottom: 20px;
        }
        .sidebar {
            height: 100vh;
            background: #00796b;
            color: white;
            padding-top: 20px;
        }
        .sidebar a {
            color: white;
            text-decoration: none;
            display: block;
            padding: 10px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .sidebar a:hover {
            background: #005b4f;
        }
        .table th, .table td {
            vertical-align: middle;
        }
        .btn {
            transition: background 0.3s;
        }
        .btn:hover {
            background: #005b4f;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-3 sidebar">
                <h3 class="text-center mb-4">👤 لوحة المشرف</h3>
                <a href="#patients">إدارة المرضى</a>
                <a href="#chat">الدردشة</a>
                <a href="index.html">🔙 تسجيل خروج</a>
            </div>
            <!-- Main content -->
            <div class="col-9 p-4">
                <h1>لوحة التحكم</h1>
                <hr>
                <!-- Patients -->
                <section id="patients" class="mb-5">
                    <h3>المرضى</h3>
                    <table class="table table-bordered bg-white">
                        <thead>
                            <tr>
                                <th>الاسم</th>
                                <th>الجلسات</th>
                                <th>إجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="patientTable">
                            <tr>
                                <td>مريض 1</td>
                                <td>5</td>
                                <td>
                                    <button class="btn btn-sm btn-warning" onclick="changePassword(this)">تغيير كلمة السر</button>
                                    <button class="btn btn-sm btn-danger" onclick="deletePatient(this)">حذف</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="input-group mb-3">
                        <input type="text" id="newPatientName" class="form-control" placeholder="اسم المريض الجديد" aria-label="New Patient Name">
                        <button class="btn btn-success" id="addPatientButton">➕ إضافة مريض جديد</button>
                    </div>
                </section>

                <!-- Chat -->
                <section id="chat" class="mb-5">
                    <h3>الدردشة مع المستشار</h3>
                    <div class="chat-box" id="chatBox" style="border: 1px solid #ccc; border-radius: 10px; padding: 10px; height: 300px; overflow-y: auto; margin-bottom: 10px;"></div>
                    <div class="input-group">
                        <input type="text" id="userMessage" class="form-control" placeholder="اكتب رسالتك هنا..." aria-label="Message">
                        <button class="btn btn-primary" id="sendChatButton">إرسال</button>
                    </div>
                </section>
                <button class="btn btn-secondary mt-4" onclick="goBack()">🔙 العودة</button>
            </div>
        </div>
    </div>

    <script>
        // إضافة مريض جديد
        document.getElementById('addPatientButton').addEventListener('click', function() {
            const patientName = document.getElementById('newPatientName').value.trim();
            if (patientName) {
                const table = document.getElementById('patientTable');
                const newRow = table.insertRow();
                newRow.innerHTML = `
                    <td>${patientName}</td>
                    <td>0</td>
                    <td>
                        <button class="btn btn-sm btn-warning" onclick="changePassword(this)">تغيير كلمة السر</button>
                        <button class="btn btn-sm btn-danger" onclick="deletePatient(this)">حذف</button>
                    </td>
                `;
                document.getElementById('newPatientName').value = '';
            }
        });

        // تغيير كلمة السر (وظيفة وهمية)
        function changePassword(button) {
            alert("تغيير كلمة السر ليس مفعلًا بعد.");
        }

        // حذف مريض
        function deletePatient(button) {
            const row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
        }

        // إرسال رسالة في الدردشة
        document.getElementById('sendChatButton').addEventListener('click', function() {
            const message = document.getElementById('userMessage').value.trim();
            if (message) {
                const chatBox = document.getElementById('chatBox');
                chatBox.innerHTML += `<div><strong>أنت:</strong> ${message}</div>`;
                document.getElementById('userMessage').value = '';

                // محاكاة رد الذكاء الاصطناعي
                setTimeout(() => {
                    const aiResponse = "آسف، لم أفهم ما تقصده."; // يمكنك تحسين هذه الردود
                    chatBox.innerHTML += `<div><strong>المستشار:</strong> ${aiResponse}</div>`;
                    chatBox.scrollTop = chatBox.scrollHeight; // سكروول إلى الأسفل
                }, 1000);
            }
        });

        // دالة للعودة للخلف
        function goBack() {
            window.history.back();
        }
    </script>
</body>
</html>